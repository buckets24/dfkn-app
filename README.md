## Some notes when settings up new environment

- Don't forget the setup the COGNITO user groups
- Create an admin account
- Copy the resolvers to the new console

## KNOWN ISSUES/WARNINGS

- Typings are not perfect, and a lot of casting may happen. https://github.com/aws-amplify/amplify-js/issues/4257#issuecomment-630742477

---

## ENV and Account creation

- ACCESS_KEY_ID - Developer/Admin key generated in AWS account (DONE)
- SECRET_ACCESS_KEY - same as the above (DONE)

### Generated by amplify init and then manually added to vercel

Public

- NEXT_PUBLIC_aws_project_region - AWS project region (DONE)
- NEXT_PUBLIC_aws_appsync_graphqlEndpoint - Endpoint for the graphql in DynamoDB (DONE)
- NEXT_PUBLIC_aws_appsync_region - AWS app region (DONE)
- NEXT_PUBLIC_aws_appsync_authenticationType - Type of authentication to be used for accessing data in AWS (DONE)
- NEXT_PUBLIC_aws_cognito_region - AWS cognito region (DONE)
- NEXT_PUBLIC_aws_user_pools_id - AWS user pools id (DONE)
- NEXT_PUBLIC_aws_user_pools_web_client_id - AWS id for the web client (DONE)
- NEXT_PUBLIC_VERCEL_URL - Domain of the site. (DONE)

Private

- aws_appsync_apiKey - API key to access graphql api without cognito. This might need to be replaced with iam role (DONE)
- AWS_SES_FROM_EMAIL - Email from (DONE)
- AWS_SES_SECRET_KEY - Secret SES key (DONE)
- AWS_SES_ACCESS_KEY - SES access key (DONE)
- AWS_SES_REGION - Region for the SES, only eu-central-1 (DONE)

---

### Fetch the updated schema changes on dev environment

Make sure that amplify CLI is installed in your local machine, then run the following commands:

Checkout to dev environment

```bash
amplify env checkout dev
```

Pull the changes from the dev environment

```bash
amplify pull -y
```

Update the API and mutations via:

```bash
npm run amplify-rebuild
```

#### Cascading delete/update and clean up of stale data

- When deleting a Client make sure to delete matching Meetings, Documents.
- When deleting an Agent make sure to update Meetings, and Clients to a new Agent
